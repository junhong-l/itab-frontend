<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>导航页</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div id="background"></div>
  
  <div class="container">
    <!-- 时间日期显示区域 -->
    <div class="datetime-section">
      <div id="time" class="time">00:00:00</div>
      <div class="date-info">
        <span id="date"></span>
        <span id="weekday"></span>
        <span id="lunar"></span>
      </div>
    </div>

    <!-- 搜索框区域 -->
    <div class="search-section">
      <div class="search-box" id="searchBox">
        <div class="search-engine-selector" id="engineSelector">
          <img id="currentEngineIcon" src="" alt="">
          <span id="currentEngineName">百度</span>
          <svg class="arrow-icon" viewBox="0 0 24 24" width="16" height="16">
            <path fill="currentColor" d="M7 10l5 5 5-5z"/>
          </svg>
        </div>
        <div class="search-engine-dropdown" id="engineDropdown">
          <!-- 动态生成搜索引擎列表 -->
        </div>
        <input type="text" id="searchInput" placeholder="搜索..." autocomplete="off">
        <div class="bookmark-search-results" id="bookmarkSearchResults">
          <!-- 动态生成书签搜索结果 -->
        </div>
        <button class="search-btn" id="searchBtn">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- 图标网格区域 -->
    <div class="shortcuts-section" id="shortcutsSection">
      <!-- 动态生成文件夹和快捷方式 -->
    </div>

    <!-- 多选模式操作栏 -->
    <div class="multi-select-bar" id="multiSelectBar">
      <div class="multi-select-info">
        <span>已选择 <strong id="selectedCount">0</strong> 项</span>
      </div>
      <div class="multi-select-actions">
        <button class="btn btn-secondary" id="selectAllBtn">全选</button>
        <button class="btn btn-secondary" id="deselectAllBtn">取消全选</button>
        <button class="btn btn-danger" id="deleteSelectedBtn">
          <svg viewBox="0 0 24 24" width="16" height="16">
            <path fill="currentColor" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
          </svg>
          删除选中
        </button>
        <button class="btn btn-secondary" id="exitMultiSelectBtn">退出多选</button>
      </div>
    </div>
  </div>

  <!-- 右下角按钮组 -->
  <div class="bottom-actions">
    <!-- 添加菜单按钮 -->
    <div class="action-btn-wrapper">
      <button class="action-btn" id="addMenuBtn" title="添加">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
        </svg>
      </button>
      <div class="action-dropdown" id="addMenuDropdown">
        <div class="action-dropdown-item" id="addShortcutBtn">
          <svg viewBox="0 0 24 24" width="18" height="18">
            <path fill="currentColor" d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
          </svg>
          添加书签
        </div>
        <div class="action-dropdown-item" id="addFolderBtn">
          <svg viewBox="0 0 24 24" width="18" height="18">
            <path fill="currentColor" d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"/>
          </svg>
          添加文件夹
        </div>
        <div class="action-dropdown-item" id="addPartitionBtn">
          <svg viewBox="0 0 24 24" width="18" height="18">
            <path fill="currentColor" d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/>
          </svg>
          添加分区
        </div>
      </div>
    </div>

    <!-- 编辑模式按钮 -->
    <button class="action-btn" id="multiSelectBtn" title="多选管理">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <path fill="currentColor" d="M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"/>
      </svg>
    </button>

    <!-- 同步按钮 -->
    <button class="action-btn" id="syncBtn" title="云同步">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <path fill="currentColor" d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h.71C7.37 7.69 9.48 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3s-1.34 3-3 3z"/>
      </svg>
    </button>

    <!-- 密码管理按钮 -->
    <button class="action-btn" id="passwordManagerBtn" title="密码管理">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <path fill="currentColor" d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H8.9V6zM18 20H6V10h12v10z"/>
      </svg>
    </button>

    <!-- 设置按钮 -->
    <button class="action-btn" id="settingsBtn" title="设置">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <path fill="currentColor" d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
      </svg>
    </button>
  </div>

  <!-- 设置面板 -->
  <div class="settings-panel" id="settingsPanel">
    <div class="settings-content">
      <div class="settings-header">
        <h2>设置</h2>
        <button class="close-btn" id="closeSettingsBtn">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>

      <div class="settings-tabs">
        <button class="tab-btn active" data-tab="background">背景设置</button>
        <button class="tab-btn" data-tab="appearance">外观设置</button>
        <button class="tab-btn" data-tab="engines">搜索引擎</button>
        <button class="tab-btn" data-tab="import">导入书签</button>
      </div>

      <!-- 背景设置 -->
      <div class="settings-tab-content active" id="tab-background">
        <div class="setting-group">
          <label>背景类型</label>
          <select id="bgType">
            <option value="gradient">渐变</option>
            <option value="solid">纯色</option>
            <option value="image">图片</option>
          </select>
        </div>

        <div class="setting-group" id="gradientSettings">
          <label>渐变颜色</label>
          <div class="color-inputs">
            <input type="color" id="gradientColor1" value="#667eea">
            <span>到</span>
            <input type="color" id="gradientColor2" value="#764ba2">
          </div>
          <label>渐变角度</label>
          <input type="range" id="gradientAngle" min="0" max="360" value="135">
          <span id="gradientAngleValue">135°</span>
        </div>

        <div class="setting-group" id="solidSettings" style="display: none;">
          <label>背景颜色</label>
          <input type="color" id="solidColor" value="#1a1a2e">
        </div>

        <div class="setting-group" id="imageSettings" style="display: none;">
          <label>背景图片</label>
          <input type="file" id="bgImageInput" accept="image/*">
          <div id="bgImagePreview"></div>
        </div>
      </div>

      <!-- 外观设置 -->
      <div class="settings-tab-content" id="tab-appearance">
        <div class="setting-group">
          <label>布局模式</label>
          <div class="layout-mode-selector">
            <label class="layout-option">
              <input type="radio" name="layoutMode" value="grid" id="layoutModeGrid" checked>
              <span class="layout-icon">
                <svg viewBox="0 0 24 24" width="24" height="24">
                  <path fill="currentColor" d="M3 3h8v8H3V3zm0 10h8v8H3v-8zm10-10h8v8h-8V3zm0 10h8v8h-8v-8z"/>
                </svg>
              </span>
              <span>网格</span>
            </label>
            <label class="layout-option">
              <input type="radio" name="layoutMode" value="bar" id="layoutModeBar">
              <span class="layout-icon">
                <svg viewBox="0 0 24 24" width="24" height="24">
                  <path fill="currentColor" d="M3 5h18v3H3V5zm0 6h18v3H3v-3zm0 6h18v3H3v-3z"/>
                </svg>
              </span>
              <span>横条</span>
            </label>
          </div>
        </div>

        <!-- 网格模式设置 -->
        <div class="grid-mode-settings" id="gridModeSettings">
          <div class="setting-group">
            <label>图标大小</label>
            <input type="range" id="iconSize" min="48" max="96" value="64">
            <span id="iconSizeValue">64px</span>
          </div>
          <div class="setting-group">
            <label>文件夹大小</label>
            <input type="range" id="folderSize" min="50" max="120" value="65">
            <span id="folderSizeValue">65px</span>
          </div>
          <div class="setting-group">
            <label>图标间距</label>
            <input type="range" id="iconGap" min="5" max="40" value="15">
            <span id="iconGapValue">15px</span>
          </div>
          <div class="setting-group">
            <label>文件夹间距</label>
            <input type="range" id="folderGap" min="5" max="50" value="20">
            <span id="folderGapValue">20px</span>
          </div>
        </div>

        <!-- 横条模式设置 -->
        <div class="bar-mode-settings" id="barModeSettings" style="display: none;">
          <div class="setting-subheader">书签横条</div>
          <div class="setting-group">
            <label>横条宽度</label>
            <input type="range" id="barWidth" min="120" max="300" value="180">
            <span id="barWidthValue">180px</span>
          </div>
          <div class="setting-group">
            <label>横条高度</label>
            <input type="range" id="barHeight" min="32" max="56" value="40">
            <span id="barHeightValue">40px</span>
          </div>
          <div class="setting-group">
            <label>横条间距</label>
            <input type="range" id="barGap" min="4" max="20" value="8">
            <span id="barGapValue">8px</span>
          </div>
          <div class="setting-group">
            <label>每行数量</label>
            <input type="range" id="barColumns" min="2" max="8" value="4">
            <span id="barColumnsValue">4个</span>
          </div>
          
          <div class="setting-subheader">文件夹横条</div>
          <div class="setting-group">
            <label>文件夹高度</label>
            <input type="range" id="folderBarHeight" min="36" max="60" value="44">
            <span id="folderBarHeightValue">44px</span>
          </div>
        </div>

        <!-- 通用设置 -->
        <div class="setting-group">
          <label>图标圆角</label>
          <input type="range" id="iconRadius" min="0" max="50" value="12">
          <span id="iconRadiusValue">12px</span>
        </div>
        <div class="setting-group">
          <label>搜索框圆角</label>
          <input type="range" id="searchRadius" min="0" max="50" value="25">
          <span id="searchRadiusValue">25px</span>
        </div>
        <div class="setting-group">
          <label>按钮圆角</label>
          <input type="range" id="btnRadius" min="0" max="30" value="12">
          <span id="btnRadiusValue">12px</span>
        </div>
      </div>

      <!-- 搜索引擎管理 -->
      <div class="settings-tab-content" id="tab-engines">
        <div class="engines-list" id="enginesList">
          <!-- 动态生成搜索引擎列表 -->
        </div>
        <button class="add-engine-btn" id="addEngineBtn">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
          </svg>
          添加搜索引擎
        </button>
      </div>

      <!-- 导入书签 -->
      <div class="settings-tab-content" id="tab-import">
        <div class="setting-group">
          <label>导入 HTML 书签文件</label>
          <p class="setting-hint">从浏览器导出的书签文件（通常为 bookmarks.html）</p>
          <input type="file" id="bookmarkFileInput" accept=".html,.htm">
        </div>
        <div id="importPreview" class="import-preview"></div>
        <div id="importActions" class="import-actions" style="display: none;">
          <button class="btn btn-secondary" id="selectAllBookmarks">全选</button>
          <button class="btn btn-secondary" id="deselectAllBookmarks">取消全选</button>
          <button class="btn btn-primary" id="importSelectedBookmarks">导入选中</button>
        </div>

        <hr class="setting-divider">

        <div class="setting-group">
          <label>备份与恢复</label>
          <p class="setting-hint">导出或导入所有数据（书签、文件夹、搜索引擎、外观设置、密码）</p>
          <div class="backup-buttons">
            <button class="btn btn-primary" id="exportDataBtn">
              <svg viewBox="0 0 24 24" width="16" height="16">
                <path fill="currentColor" d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
              </svg>
              导出备份
            </button>
            <label class="btn btn-secondary" id="importDataLabel">
              <svg viewBox="0 0 24 24" width="16" height="16">
                <path fill="currentColor" d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
              </svg>
              导入备份
              <input type="file" id="importDataInput" accept=".json" style="display: none;">
            </label>
          </div>
        </div>

        <div class="setting-group">
          <label>图标管理</label>
          <p class="setting-hint">重新获取所有书签图标并保存为本地缓存，确保离线可用</p>
          <button class="btn btn-secondary" id="refetchAllIconsBtn">
            <svg viewBox="0 0 24 24" width="16" height="16">
              <path fill="currentColor" d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
            </svg>
            重新获取所有图标
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 添加/编辑快捷方式弹窗 -->
  <div class="modal" id="shortcutModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">添加快捷方式</h3>
        <button class="close-btn" id="closeModalBtn">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="shortcutName">名称</label>
          <input type="text" id="shortcutName" placeholder="网站名称">
        </div>
        <div class="form-group">
          <label for="shortcutUrl">网址</label>
          <input type="text" id="shortcutUrl" placeholder="https://example.com">
        </div>
        <div class="form-group">
          <label for="shortcutIconSource">图标来源</label>
          <div class="icon-source-row">
            <select id="shortcutIconSource">
              <option value="auto">自动获取</option>
              <option value="iowen">一为API (国内)</option>
              <option value="cccyun">Cccyun (国内)</option>
              <option value="7ed">7ED (国内)</option>
              <option value="duckduckgo">DuckDuckGo</option>
              <option value="google">Google</option>
              <option value="url">自定义URL</option>
              <option value="local">本地上传</option>
              <option value="base64">Base64编码</option>
            </select>
            <button type="button" class="icon-btn" id="refreshIconBtn" title="刷新图标">
              <svg viewBox="0 0 24 24" width="18" height="18">
                <path fill="currentColor" d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
              </svg>
            </button>
            <button type="button" class="icon-btn icon-btn-danger" id="resetIconBtn" title="重置图标">
              <svg viewBox="0 0 24 24" width="18" height="18">
                <path fill="currentColor" d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="form-group icon-input-area url-area" style="display: none;">
          <label for="shortcutIconUrl">图标地址</label>
          <input type="text" id="shortcutIconUrl" placeholder="https://example.com/icon.png">
        </div>
        <div class="form-group icon-input-area file-area" style="display: none;">
          <label>上传图标</label>
          <div class="file-upload-wrapper">
            <input type="file" id="shortcutIconFile" accept="image/*">
            <label for="shortcutIconFile" class="file-upload-btn">
              <svg viewBox="0 0 24 24" width="16" height="16">
                <path fill="currentColor" d="M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z"/>
              </svg>
              <span>选择图片</span>
            </label>
            <span class="file-name" id="iconFileName">未选择文件</span>
          </div>
        </div>
        <div class="form-group icon-input-area base64-area" style="display: none;">
          <label for="shortcutIconBase64">Base64编码</label>
          <textarea id="shortcutIconBase64" rows="3" placeholder="data:image/png;base64,..."></textarea>
        </div>
        <div class="form-group icon-preview-group">
          <label>图标预览</label>
          <div class="icon-preview" id="shortcutIconPreview">
            <img id="shortcutIconPreviewImg" src="" alt="图标预览" style="display: none;">
            <div class="icon-preview-placeholder" id="shortcutIconPreviewPlaceholder">
              <svg viewBox="0 0 24 24" width="24" height="24">
                <path fill="currentColor" d="M21,5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V5A2,2 0 0,1 5,3H19A2,2 0 0,1 21,5M5,5V19H19V5H5M7.5,13.5L11,10L13,13.5L15.5,10.5L18,14.5H6L7.5,13.5Z"/>
              </svg>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label for="shortcutPartition">所属工作区</label>
          <select id="shortcutPartition">
          </select>
        </div>
        <div class="form-group">
          <label for="shortcutFolder">所属文件夹</label>
          <select id="shortcutFolder">
            <option value="">无（独立书签）</option>
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelShortcutBtn">取消</button>
        <button class="btn btn-primary" id="saveShortcutBtn">保存</button>
      </div>
    </div>
  </div>

  <!-- 添加/编辑文件夹弹窗 -->
  <div class="modal" id="folderModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="folderModalTitle">添加文件夹</h3>
        <button class="close-btn" id="closeFolderModalBtn">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="folderName">文件夹名称</label>
          <input type="text" id="folderName" placeholder="文件夹名称">
        </div>
        <div class="form-group">
          <label for="folderPartition">所属工作区</label>
          <select id="folderPartition">
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelFolderBtn">取消</button>
        <button class="btn btn-primary" id="saveFolderBtn">保存</button>
      </div>
    </div>
  </div>

  <!-- 添加/编辑搜索引擎弹窗 -->
  <div class="modal" id="engineModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="engineModalTitle">添加搜索引擎</h3>
        <button class="close-btn" id="closeEngineModalBtn">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="engineName">名称</label>
          <input type="text" id="engineName" placeholder="搜索引擎名称">
        </div>
        <div class="form-group">
          <label for="engineUrl">搜索 URL</label>
          <input type="text" id="engineUrl" placeholder="https://www.example.com/search?q=%s">
          <p class="form-hint">使用 %s 表示搜索关键词的位置</p>
        </div>
        <div class="form-group">
          <label for="engineIcon">图标 URL（可选）</label>
          <input type="text" id="engineIcon" placeholder="https://www.example.com/favicon.ico">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelEngineBtn">取消</button>
        <button class="btn btn-primary" id="saveEngineBtn">保存</button>
      </div>
    </div>
  </div>

  <!-- 文件夹展开弹窗 -->
  <div class="folder-popup-overlay" id="folderPopupOverlay">
    <div class="folder-popup" id="folderPopup">
      <div class="folder-popup-header">
        <h3 id="folderPopupTitle">文件夹</h3>
        <button class="close-btn" id="closeFolderPopupBtn">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      <div class="folder-popup-content" id="folderPopupContent">
        <!-- 动态生成书签 -->
      </div>
    </div>
  </div>

  <!-- 右键菜单 -->
  <div class="context-menu" id="contextMenu">
    <div class="context-menu-item" id="pinShortcut">钉到常用</div>
    <div class="context-menu-item" id="editShortcut">编辑</div>
    <div class="context-menu-item" id="deleteShortcut">删除</div>
  </div>

  <!-- 文件夹右键菜单 -->
  <div class="context-menu" id="folderContextMenu">
    <div class="context-menu-item" id="editFolder">编辑文件夹</div>
    <div class="context-menu-item" id="deleteFolder">删除文件夹</div>
  </div>

  <!-- 分区右键菜单 -->
  <div class="context-menu" id="partitionContextMenu">
    <div class="context-menu-item" id="editPartition">编辑分区</div>
    <div class="context-menu-item" id="deletePartition">删除分区</div>
  </div>

  <!-- 页面右键菜单（空白处点击） -->
  <div class="context-menu" id="pageContextMenu">
    <div class="context-menu-item" id="addPageToBookmark">
      <svg viewBox="0 0 24 24" width="16" height="16">
        <path fill="currentColor" d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>
      </svg>
      添加当前页到书签
    </div>
  </div>

  <!-- 添加页面到书签弹窗 -->
  <div class="modal" id="addPageBookmarkModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="addPageBookmarkTitle">添加页面到书签</h3>
        <button class="close-btn" id="closeAddPageBookmarkBtn">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="pageBookmarkName">名称</label>
          <input type="text" id="pageBookmarkName" placeholder="网站名称">
        </div>
        <div class="form-group">
          <label for="pageBookmarkUrl">网址</label>
          <input type="text" id="pageBookmarkUrl" placeholder="https://example.com" readonly>
        </div>
        <div class="form-group">
          <label>页面类型</label>
          <div class="page-type-options">
            <label class="radio-option">
              <input type="radio" name="pageBookmarkType" value="normal" checked>
              <span class="radio-label">普通页面</span>
            </label>
            <label class="radio-option">
              <input type="radio" name="pageBookmarkType" value="private">
              <span class="radio-label">隐私页面</span>
            </label>
          </div>
        </div>
        <div class="form-group">
          <label for="pageBookmarkPartition">选择工作区</label>
          <select id="pageBookmarkPartition">
            <!-- 动态生成工作区选项 -->
          </select>
        </div>
        <div class="form-group">
          <label for="pageBookmarkFolder">选择文件夹</label>
          <select id="pageBookmarkFolder">
            <option value="">无（根目录）</option>
            <!-- 动态生成文件夹选项 -->
          </select>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelAddPageBookmarkBtn">取消</button>
        <button class="btn btn-primary" id="saveAddPageBookmarkBtn">保存</button>
      </div>
    </div>
  </div>

  <!-- 添加/编辑分区弹窗 -->
  <div class="modal" id="partitionModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="partitionModalTitle">添加分区</h3>
        <button class="close-btn" id="closePartitionModalBtn">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="partitionName">分区名称</label>
          <input type="text" id="partitionName" placeholder="分区名称">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelPartitionBtn">取消</button>
        <button class="btn btn-primary" id="savePartitionBtn">保存</button>
      </div>
    </div>
  </div>

  <!-- 备份预览弹窗 -->
  <div class="modal" id="backupPreviewModal">
    <div class="modal-content modal-large">
      <div class="modal-header">
        <h3 id="backupPreviewTitle">备份预览</h3>
        <button class="close-btn" id="closeBackupPreviewBtn">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <!-- 备份信息 -->
        <div class="backup-info" id="backupInfo"></div>
        
        <!-- 导入模式选择 -->
        <div class="backup-mode" id="backupModeSection">
          <label>导入模式</label>
          <div class="backup-mode-options">
            <label class="radio-option">
              <input type="radio" name="importMode" value="replace" checked>
              <span class="radio-label">
                <strong>完全替换</strong>
                <small>清空当前数据，完全使用备份数据</small>
              </span>
            </label>
            <label class="radio-option">
              <input type="radio" name="importMode" value="merge">
              <span class="radio-label">
                <strong>智能合并</strong>
                <small>保留当前数据，合并备份中的新内容</small>
              </span>
            </label>
          </div>
        </div>

        <!-- 数据预览树 -->
        <div class="backup-preview-tree" id="backupPreviewTree"></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelBackupImportBtn">取消</button>
        <button class="btn btn-warning" id="exportCurrentBeforeImport">先导出当前数据</button>
        <button class="btn btn-primary" id="confirmBackupImportBtn">确认导入</button>
      </div>
    </div>
  </div>

  <!-- 同步面板 -->
  <div class="sync-panel" id="syncPanel">
    <div class="sync-content">
      <div class="sync-header">
        <h2>云同步</h2>
        <button class="close-btn" id="closeSyncBtn">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>

      <!-- 未连接状态 - 登录表单 -->
      <div class="sync-login" id="syncLogin">
        <div class="form-group">
          <label for="syncApiList">列表接口</label>
          <input type="text" id="syncApiList" placeholder="https://api.example.com/api/sync/list">
        </div>
        <div class="form-group">
          <label for="syncApiUpload">上传接口</label>
          <input type="text" id="syncApiUpload" placeholder="https://api.example.com/api/sync/upload">
        </div>
        <div class="form-group">
          <label for="syncApiDownload">下载接口</label>
          <input type="text" id="syncApiDownload" placeholder="https://api.example.com/api/sync/download">
        </div>
        <div class="form-group">
          <label for="syncAccessKey">Access Key</label>
          <input type="text" id="syncAccessKey" placeholder="输入 Access Key">
        </div>
        <div class="form-group">
          <label for="syncSecretKey">Secret Key</label>
          <input type="password" id="syncSecretKey" placeholder="输入 Secret Key">
        </div>
        <div class="sync-status" id="syncStatus"></div>
        <button class="btn btn-primary btn-block" id="syncConnectBtn">连接</button>
      </div>

      <!-- 已连接状态 - 同步操作 -->
      <div class="sync-actions" id="syncActions" style="display: none;">
        <div class="sync-connected">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
          </svg>
          <span>已连接</span>
          <button class="btn btn-link" id="syncDisconnectBtn">断开</button>
        </div>
        
        <!-- 备份列表 -->
        <div class="sync-backup-list" id="syncBackupList">
          <div class="sync-backup-header">
            <span>云端备份</span>
            <button class="btn btn-sm btn-icon" id="syncRefreshBtn" title="刷新列表">
              <svg viewBox="0 0 24 24" width="16" height="16">
                <path fill="currentColor" d="M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
              </svg>
            </button>
          </div>
          <div class="sync-backup-items" id="syncBackupItems">
            <!-- 备份列表项将动态生成 -->
          </div>
        </div>

        <!-- 操作按钮 -->
        <div class="sync-buttons">
          <button class="btn btn-secondary" id="syncDownloadBtn" disabled>
            <svg viewBox="0 0 24 24" width="18" height="18">
              <path fill="currentColor" d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
            </svg>
            下载选中备份
          </button>
          <button class="btn btn-primary" id="syncUploadBtn">
            <svg viewBox="0 0 24 24" width="18" height="18">
              <path fill="currentColor" d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
            </svg>
            上传本地数据
          </button>
        </div>
        <div class="sync-info" id="syncInfo"></div>
      </div>
    </div>
  </div>

  <!-- 访问密码设置弹窗 -->
  <div class="modal-overlay" id="pwdAccessSetModal">
    <div class="modal-content pwd-access-modal">
      <div class="modal-header">
        <h3>设置访问密码</h3>
        <button class="modal-close" id="pwdAccessSetClose">&times;</button>
      </div>
      <div class="modal-body">
        <p class="pwd-access-tip">首次使用密码管理器，请设置访问密码以保护您的数据。</p>
        <div class="form-group">
          <label>访问密码</label>
          <input type="password" id="pwdAccessNew" placeholder="请输入访问密码" autocomplete="new-password">
        </div>
        <div class="form-group">
          <label>确认密码</label>
          <input type="password" id="pwdAccessConfirm" placeholder="请再次输入密码" autocomplete="new-password">
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" id="pwdAccessSetCancel">取消</button>
        <button class="btn btn-primary" id="pwdAccessSetSave">确定</button>
      </div>
    </div>
  </div>

  <!-- 访问密码验证弹窗 -->
  <div class="modal-overlay" id="pwdAccessVerifyModal">
    <div class="modal-content pwd-access-modal">
      <div class="modal-header">
        <h3>验证访问密码</h3>
        <button class="modal-close" id="pwdAccessVerifyClose">&times;</button>
      </div>
      <div class="modal-body">
        <p class="pwd-access-tip">请输入访问密码以打开密码管理器。</p>
        <div class="form-group">
          <label>访问密码</label>
          <input type="password" id="pwdAccessInput" placeholder="请输入访问密码" autocomplete="current-password">
        </div>
        <p class="pwd-access-error" id="pwdAccessError" style="display: none;">密码错误，请重试</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" id="pwdAccessVerifyCancel">取消</button>
        <button class="btn btn-primary" id="pwdAccessVerifyConfirm">确定</button>
      </div>
    </div>
  </div>

  <!-- 自定义 Alert 弹窗 -->
  <div class="custom-alert-overlay" id="customAlertOverlay">
    <div class="custom-alert-box">
      <div class="custom-alert-icon" id="customAlertIcon">
        <svg viewBox="0 0 24 24" width="48" height="48">
          <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
        </svg>
      </div>
      <div class="custom-alert-message" id="customAlertMessage"></div>
      <button class="custom-alert-btn" id="customAlertBtn">确定</button>
    </div>
  </div>

  <!-- 自定义 Confirm 弹窗 -->
  <div class="custom-alert-overlay" id="customConfirmOverlay">
    <div class="custom-alert-box">
      <div class="custom-alert-icon confirm-icon">
        <svg viewBox="0 0 24 24" width="48" height="48">
          <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
        </svg>
      </div>
      <div class="custom-alert-message" id="customConfirmMessage"></div>
      <div class="custom-alert-buttons">
        <button class="custom-alert-btn btn-cancel" id="customConfirmCancel">取消</button>
        <button class="custom-alert-btn btn-confirm" id="customConfirmOk">确定</button>
      </div>
    </div>
  </div>

  <!-- 自定义 Prompt 输入弹窗 -->
  <div class="custom-alert-overlay" id="customPromptOverlay">
    <div class="custom-alert-box">
      <div class="custom-alert-icon info-icon">
        <svg viewBox="0 0 24 24" width="48" height="48">
          <path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
        </svg>
      </div>
      <div class="custom-alert-message" id="customPromptMessage"></div>
      <input type="text" class="custom-prompt-input" id="customPromptInput" placeholder="请输入...">
      <div class="custom-alert-buttons">
        <button class="custom-alert-btn btn-cancel" id="customPromptCancel">取消</button>
        <button class="custom-alert-btn btn-confirm" id="customPromptOk">确定</button>
      </div>
    </div>
  </div>

  <!-- 导出选择弹窗 -->
  <div class="custom-alert-overlay" id="exportChoiceOverlay">
    <div class="custom-alert-box export-choice-box">
      <div class="custom-alert-icon">
        <svg viewBox="0 0 24 24" width="48" height="48">
          <path fill="currentColor" d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H8.9V6zM18 20H6V10h12v10z"/>
        </svg>
      </div>
      <div class="custom-alert-message">检测到密码数据，请选择导出方式：</div>
      <div class="export-choice-tip">加密后的密码在导入时需要输入相同密钥才能恢复</div>
      <div class="export-choice-buttons">
        <button class="export-choice-btn btn-encrypt" id="exportChoiceEncrypt">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
          </svg>
          加密导出
        </button>
        <button class="export-choice-btn btn-plain" id="exportChoicePlain">
          <svg viewBox="0 0 24 24" width="20" height="20">
            <path fill="currentColor" d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
          </svg>
          不加密导出
        </button>
        <button class="export-choice-btn btn-cancel" id="exportChoiceCancel">取消</button>
      </div>
    </div>
  </div>

  <!-- 加密密钥输入弹窗 -->
  <div class="modal-overlay" id="encryptKeyModal">
    <div class="modal-content encrypt-key-modal">
      <div class="modal-header">
        <h3 id="encryptKeyTitle">输入加密密钥</h3>
        <button class="close-btn" id="closeEncryptKeyBtn">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <p class="encrypt-key-tip" id="encryptKeyTip">
          <svg viewBox="0 0 24 24" width="16" height="16">
            <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
          </svg>
          <span id="encryptKeyTipText">密码数据将使用此密钥进行 AES 加密后上传，下载时需要使用相同密钥解密。</span>
        </p>
        <div class="form-group">
          <label for="encryptKeyInput">加密密钥</label>
          <div class="password-input-wrapper">
            <input type="password" id="encryptKeyInput" placeholder="请输入加密密钥" autocomplete="off">
            <button type="button" class="toggle-password-btn" id="toggleEncryptKey">
              <svg viewBox="0 0 24 24" width="20" height="20">
                <path fill="currentColor" d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="form-group">
          <label for="encryptKeyConfirm">确认密钥</label>
          <div class="password-input-wrapper">
            <input type="password" id="encryptKeyConfirm" placeholder="请再次输入加密密钥" autocomplete="off">
            <button type="button" class="toggle-password-btn" id="toggleEncryptKeyConfirm">
              <svg viewBox="0 0 24 24" width="20" height="20">
                <path fill="currentColor" d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
              </svg>
            </button>
          </div>
        </div>
        <p class="encrypt-key-error" id="encryptKeyError" style="display: none;"></p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-outline" id="cancelEncryptKey">取消</button>
        <button class="btn btn-primary" id="confirmEncryptKey">确认</button>
      </div>
    </div>
  </div>

  <!-- 密码管理弹窗 -->
  <div class="password-manager-modal" id="passwordManagerModal">
    <div class="password-manager-content">
      <div class="password-manager-header">
        <div class="password-manager-title">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H8.9V6zM18 20H6V10h12v10z"/>
          </svg>
          <h2>密码管理</h2>
        </div>
        <button class="close-btn" id="closePasswordManagerBtn">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>

      <div class="password-manager-toolbar">
        <label class="pwd-select-all-wrapper" title="全选/取消全选">
          <input type="checkbox" id="pwdSelectAll">
          <span>全选</span>
        </label>
        <div class="password-search-box">
          <svg viewBox="0 0 24 24" width="18" height="18">
            <path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
          </svg>
          <input type="text" id="pwdSearchInput" placeholder="搜索网址..." autocomplete="off">
        </div>
        <div class="password-toolbar-actions">
          <button class="btn btn-outline btn-sm" id="pwdDecryptBtn" title="解密显示所有密码">
            <svg viewBox="0 0 24 24" width="16" height="16">
              <path fill="currentColor" d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"/>
            </svg>
            解密
          </button>
          <button class="btn btn-outline btn-sm" id="pwdEncryptBtn" title="加密隐藏所有密码">
            <svg viewBox="0 0 24 24" width="16" height="16">
              <path fill="currentColor" d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
            </svg>
            加密
          </button>
          <button class="btn btn-danger btn-sm" id="pwdDeleteSelectedBtn" disabled title="删除选中">
            <svg viewBox="0 0 24 24" width="16" height="16">
              <path fill="currentColor" d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
            </svg>
            删除
          </button>
          <button class="btn btn-primary btn-sm" id="pwdAddBtn">
            <svg viewBox="0 0 24 24" width="16" height="16">
              <path fill="currentColor" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
            </svg>
            添加
          </button>
        </div>
      </div>

      <div class="password-list" id="pwdList">
        <!-- 动态生成密码列表 -->
        <div class="password-empty" id="pwdEmpty">
          <svg viewBox="0 0 24 24" width="48" height="48">
            <path fill="currentColor" d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM8.9 6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2H8.9V6zM18 20H6V10h12v10z"/>
          </svg>
          <p>暂无保存的密码</p>
          <span>访问网站时会自动提示保存密码</span>
        </div>
      </div>

      <div class="password-manager-footer">
        <div class="password-footer-left">
          <button class="btn btn-link" id="pwdImportBtn">
            <svg viewBox="0 0 24 24" width="16" height="16">
              <path fill="currentColor" d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/>
            </svg>
            导入
          </button>
          <button class="btn btn-link" id="pwdExportBtn">
            <svg viewBox="0 0 24 24" width="16" height="16">
              <path fill="currentColor" d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
            </svg>
            导出
          </button>
        </div>
        <div class="password-footer-hint">
          <svg viewBox="0 0 24 24" width="14" height="14">
            <path fill="currentColor" d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
          </svg>
          密码存储在本地，支持自动填充
        </div>
      </div>
    </div>
    <input type="file" id="pwdImportInput" accept=".json,.csv" style="display: none;">
  </div>

  <!-- 添加/编辑密码弹窗 -->
  <div class="modal" id="passwordModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="passwordModalTitle">添加密码</h3>
        <button class="close-btn" id="closePasswordModalBtn">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="passwordSiteName">名称</label>
          <input type="text" id="passwordSiteName" placeholder="网站名称">
        </div>
        <div class="form-group">
          <label for="passwordSiteUrl">网址</label>
          <input type="text" id="passwordSiteUrl" placeholder="example.com">
        </div>
        <div class="form-group">
          <label for="passwordUsername">用户名</label>
          <input type="text" id="passwordUsername" placeholder="用户名或邮箱">
        </div>
        <div class="form-group">
          <label for="passwordValue">密码</label>
          <div class="password-input-wrapper">
            <input type="password" id="passwordValue" placeholder="密码">
            <button type="button" class="password-toggle-btn" id="togglePasswordVisibility">
              <svg class="eye-open" viewBox="0 0 24 24" width="20" height="20">
                <path fill="currentColor" d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
              </svg>
              <svg class="eye-closed" viewBox="0 0 24 24" width="20" height="20" style="display:none;">
                <path fill="currentColor" d="M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 001 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="form-group">
          <label for="passwordNotes">备注</label>
          <textarea id="passwordNotes" placeholder="可选备注信息" rows="2"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="cancelPasswordBtn">取消</button>
        <button class="btn btn-primary" id="savePasswordBtn">保存</button>
      </div>
    </div>
  </div>

  <!-- 通用提示弹窗 -->
  <div class="modal" id="alertModal">
    <div class="modal-content alert-modal">
      <div class="modal-header">
        <h3 id="alertModalTitle">提示</h3>
        <button class="close-btn" id="closeAlertModalBtn">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="alert-icon">
          <svg viewBox="0 0 24 24" width="48" height="48">
            <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
          </svg>
        </div>
        <p class="alert-message" id="alertModalMessage">提示内容</p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" id="confirmAlertBtn">确定</button>
      </div>
    </div>
  </div>

  <script src="js/lunar.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/password.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
